{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/EnriqueSalazar/Desktop/Dapp-Alexis/fcctoken/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Subject } from 'rxjs';\nimport Web3 from 'web3';\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport * as i0 from \"@angular/core\";\nexport class Web3Service {\n  constructor() {\n    this.accountStatusSource = new Subject();\n    this.accountStatus$ = this.accountStatusSource.asObservable();\n    const providerOptions = {\n      walletconnect: {\n        package: WalletConnectProvider,\n        options: {\n          infuraId: \"wss://ropsten.infura.io/ws/v3/eca8d6e59db14de084969c250d7f1844\" // required\n\n        }\n      }\n    };\n    this.web3Modal = new Web3Modal({\n      network: \"ropsten\",\n      cacheProvider: true,\n      providerOptions,\n      theme: {\n        background: \"rgb(39, 49, 56)\",\n        main: \"rgb(199, 199, 199)\",\n        secondary: \"rgb(136, 136, 136)\",\n        border: \"rgba(195, 195, 195, 0.14)\",\n        hover: \"rgb(16, 26, 32)\"\n      }\n    }); // tslint:disable-next-line:max-line-length              \n\n    this.abi = JSON.parse('[ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"Approval\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"Transfer\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"_totalSupply\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" } ], \"name\": \"allowance\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"remaining\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"approve\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" } ], \"name\": \"balanceOf\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"balance\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"decimals\", \"outputs\": [ { \"internalType\": \"uint8\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"toAddress\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"totalPoints\", \"type\": \"uint256\" } ], \"name\": \"exchangePoints\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getAmount\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getExchangeRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getTotalRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"name\", \"outputs\": [ { \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeAdd\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeDiv\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeMul\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeSub\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"toAddress\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"totalPoints\", \"type\": \"uint256\" } ], \"name\": \"sendPoints\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"totalAmount\", \"type\": \"uint256\" } ], \"name\": \"setAmount\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setExchangeRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setTotalRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"symbol\", \"outputs\": [ { \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"totalSupply\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"transfer\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"transferFrom\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" } ]');\n    this.contractAddress = '0x2be8E4e37b528356Bf4D25a90907fA524a619899';\n  }\n\n  connectAccount() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.web3Modal.clearCachedProvider();\n\n      _this.provider = yield _this.web3Modal.connect(); // set provider\n\n      _this.web3js = new Web3(_this.provider); // create web3 instance\n\n      _this.accounts = yield _this.web3js.eth.getAccounts();\n\n      _this.accountStatusSource.next(_this.accounts);\n\n      _this.contrato = new _this.web3js.eth.Contract(_this.abi, _this.contractAddress);\n    })();\n  }\n\n}\n\nWeb3Service.ɵfac = function Web3Service_Factory(t) {\n  return new (t || Web3Service)();\n};\n\nWeb3Service.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: Web3Service,\n  factory: Web3Service.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:\\Users\\EnriqueSalazar\\Desktop\\Dapp-Alexis\\fcctoken\\src\\app\\services\\web3.service.ts"],"names":[],"mappings":";AAKA,SAAS,OAAT,QAAwB,MAAxB;AAEA,OAAO,IAAP,MAAiB,MAAjB;AACA,OAAO,SAAP,MAAsB,WAAtB;AACA,OAAO,qBAAP,MAAkC,8BAAlC;;AAGA,OAAM,MAAO,WAAP,CAAkB;AAYpB,EAAA,WAAA,GAAA;AAHQ,SAAA,mBAAA,GAAsB,IAAI,OAAJ,EAAtB;AACR,SAAA,cAAA,GAAiB,KAAK,mBAAL,CAAyB,YAAzB,EAAjB;AAGI,UAAM,eAAe,GAAG;AACpB,MAAA,aAAa,EAAE;AACb,QAAA,OAAO,EAAE,qBADI;AAEb,QAAA,OAAO,EAAE;AACP,UAAA,QAAQ,EAAC,gEADF,CACmE;;AADnE;AAFI;AADK,KAAxB;AASA,SAAK,SAAL,GAAiB,IAAI,SAAJ,CAAc;AAC3B,MAAA,OAAO,EAAE,SADkB;AAE3B,MAAA,aAAa,EAAE,IAFY;AAG3B,MAAA,eAH2B;AAI3B,MAAA,KAAK,EAAE;AACH,QAAA,UAAU,EAAE,iBADT;AAEH,QAAA,IAAI,EAAE,oBAFH;AAGH,QAAA,SAAS,EAAE,oBAHR;AAIH,QAAA,MAAM,EAAE,2BAJL;AAKH,QAAA,KAAK,EAAE;AALJ;AAJoB,KAAd,CAAjB,CAVJ,CAuBI;;AACA,SAAK,GAAL,GAAW,IAAI,CAAC,KAAL,CAAW,8sOAAX,CAAX;AACA,SAAK,eAAL,GAAuB,4CAAvB;AACH;;AAEK,EAAA,cAAc,GAAA;AAAA;;AAAA;AAChB,MAAA,KAAI,CAAC,SAAL,CAAe,mBAAf;;AAEA,MAAA,KAAI,CAAC,QAAL,SAAsB,KAAI,CAAC,SAAL,CAAe,OAAf,EAAtB,CAHgB,CAGgC;;AAChD,MAAA,KAAI,CAAC,MAAL,GAAc,IAAI,IAAJ,CAAS,KAAI,CAAC,QAAd,CAAd,CAJgB,CAIuB;;AACvC,MAAA,KAAI,CAAC,QAAL,SAAsB,KAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB,WAAhB,EAAtB;;AACA,MAAA,KAAI,CAAC,mBAAL,CAAyB,IAAzB,CAA8B,KAAI,CAAC,QAAnC;;AACA,MAAA,KAAI,CAAC,QAAL,GAAgB,IAAI,KAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB,QAApB,CAA6B,KAAI,CAAC,GAAlC,EAAuC,KAAI,CAAC,eAA5C,CAAhB;AAPgB;AAQnB;;AAhDmB;;;mBAAX,W;AAAW,C;;;SAAX,W;AAAW,EAAA,OAAA,EAAX,WAAW,CAAA,I;AAAA,EAAA,UAAA,EADC","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { environment } from '../../environments/environment';\r\nimport { bindNodeCallback, Observable } from 'rxjs';\r\nimport { AbiItem } from 'web3-utils';\r\nimport { Buffer } from 'buffer';\r\nimport { Subject } from 'rxjs';\r\n\r\nimport Web3 from 'web3';\r\nimport Web3Modal from \"web3modal\";\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class Web3Service {\r\n    public abi: any;\r\n    public contractAddress: string;\r\n    public contrato: any;\r\n    public accounts: any;\r\n    public web3js: any;    \r\n    public provider: any;    \r\n    web3Modal;\r\n    \r\n    private accountStatusSource = new Subject<any>();\r\n    accountStatus$ = this.accountStatusSource.asObservable();\r\n\r\n    constructor() {\r\n        const providerOptions = {\r\n            walletconnect: {\r\n              package: WalletConnectProvider, // required\r\n              options: {\r\n                infuraId:\"wss://ropsten.infura.io/ws/v3/eca8d6e59db14de084969c250d7f1844\" // required\r\n              }\r\n            }\r\n          };\r\n\r\n        this.web3Modal = new Web3Modal({\r\n            network: \"ropsten\", // optional\r\n            cacheProvider: true, // optional\r\n            providerOptions, // required\r\n            theme: {\r\n                background: \"rgb(39, 49, 56)\",\r\n                main: \"rgb(199, 199, 199)\",\r\n                secondary: \"rgb(136, 136, 136)\",\r\n                border: \"rgba(195, 195, 195, 0.14)\",\r\n                hover: \"rgb(16, 26, 32)\"\r\n            }\r\n        });\r\n\r\n        // tslint:disable-next-line:max-line-length              \r\n        this.abi = JSON.parse('[ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"Approval\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"Transfer\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"_totalSupply\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" } ], \"name\": \"allowance\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"remaining\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"spender\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"approve\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"tokenOwner\", \"type\": \"address\" } ], \"name\": \"balanceOf\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"balance\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"decimals\", \"outputs\": [ { \"internalType\": \"uint8\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"toAddress\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"totalPoints\", \"type\": \"uint256\" } ], \"name\": \"exchangePoints\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getAmount\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getExchangeRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getTotalRewardPoints\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"name\", \"outputs\": [ { \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeAdd\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeDiv\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeMul\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"a\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"b\", \"type\": \"uint256\" } ], \"name\": \"safeSub\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"c\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"toAddress\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"totalPoints\", \"type\": \"uint256\" } ], \"name\": \"sendPoints\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"totalAmount\", \"type\": \"uint256\" } ], \"name\": \"setAmount\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setExchangeRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"points\", \"type\": \"uint256\" } ], \"name\": \"setTotalRewardPoints\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"symbol\", \"outputs\": [ { \"internalType\": \"string\", \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"totalSupply\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"transfer\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"address\", \"name\": \"from\", \"type\": \"address\" }, { \"internalType\": \"address\", \"name\": \"to\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"tokens\", \"type\": \"uint256\" } ], \"name\": \"transferFrom\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"success\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" } ]');\r\n        this.contractAddress = '0x2be8E4e37b528356Bf4D25a90907fA524a619899';     \r\n    }\r\n      \r\n    async connectAccount() {\r\n        this.web3Modal.clearCachedProvider();\r\n    \r\n        this.provider = await this.web3Modal.connect(); // set provider\r\n        this.web3js = new Web3(this.provider); // create web3 instance\r\n        this.accounts = await this.web3js.eth.getAccounts(); \r\n        this.accountStatusSource.next(this.accounts)\r\n        this.contrato = new this.web3js.eth.Contract(this.abi, this.contractAddress);   \r\n    }  \r\n    \r\n}\r\n\r\n/*\r\n\r\nconstructor() {\r\n        this.web3 = new Web3();\r\n\r\n        this.web3.setProvider(\r\n            new Web3.providers.WebsocketProvider('wss://ropsten.infura.io/ws/v3/c0c8c037208043debd3192efe93ed1d2')\r\n        );\r\n\r\n        //this.sender = '0xf65112fa0998477c990fb71722b067b7892f2160';\r\n        this.sender = '0xAFF7B3C82d2B3B2270db013E0Cbf2783ED514bF1';\r\n\r\n        this.web3.eth.defaultAccount = this.sender;\r\n        \r\n        // tslint:disable-next-line:max-line-length              \r\n        this.abi = JSON.parse('[{\"constant\":false,\"inputs\":[],\"name\":\"increment\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oldValue\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newValue\",\"type\":\"uint256\"}],\"name\":\"ValueChanged\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"getCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]');\r\n        this.contractAddress = '0x99E5a41b66702D9d54428d48FE9C8dEE2DDc6CbC';\r\n\r\n        this.contrato = new this.web3.eth.Contract(this.abi, this.contractAddress);\r\n    }\r\n*/\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}